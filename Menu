using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace projetTeste
{
    class Program
    {
        static void Main(string[] args)
        {
            Client c = new Client("Chevallier", "Ludovic", "Meudon", "a", "mdp");
           
            Maintenance m = new Maintenance();
            Agence agence = new Agence(m);
            agence.ListClient.Add(c);
            Console.WriteLine("Bonjour Monsieur/Madame bienvenue à l'agence Lutin! Que voulez vous faire?");
            Menu(agence);
            
            
            Console.ReadKey();
            
        }
        static void Menu(Agence agence)
        {

           
            int choix=52;


            while (choix > 2 || choix < 1)
            {
                
                Console.WriteLine("1.Identifcation\n2.Affichage total");

                choix = int.Parse(Console.ReadLine());
            }
            switch (choix)
            {
                case 1:// Identification


                    Console.Clear();
                    Console.WriteLine("Avez vous un compte?");
                    int option = 52;
                    while (option > 1 || option < 0)
                    {
                        Console.WriteLine("0.Non 1.Oui");
                        option = int.Parse(Console.ReadLine());
                    }
                    if (option == 1)// Compte existant
                    {
                        Console.Clear();
                        Console.WriteLine("Nous allons commencez par une identification");
                        Client a = agence.Identification();
                        Console.WriteLine("Etes vous bien :");
                        Console.WriteLine(a.ToString());

                        MenuClient (a, agence);
                    }
                    else//Création de compte
                    {
                        Console.Clear();
                        Client a = null;
                        agence.AjoutClient( ref a);
                        
                        MenuClient(a,  agence);
                    }

                    break;
                case 2:// Affichage totale
                    agence.AffichageTotale();
                    Menu(agence);
                    break;
                default:
                    break;
            }
            

        }
        static void MenuClient(Client a, Agence agence)
        {
            Console.Clear();
            Console.WriteLine(a.ToString());
            Console.WriteLine("login: " + a.Login + " \nmot de passe: " + a.Mdps);
            Console.WriteLine();
            Console.WriteLine("Bienvenue que voulez vous faire?");
            Console.WriteLine("1.Modification du compte Client\n 2.Modification du Contrat\n3.revenir au Menu");
            int choix = int.Parse(Console.ReadLine());
            while (!agence.verification(choix, 1, 3))
            {
                Console.Clear();
                Console.WriteLine(a.ToString());
                Console.WriteLine("login: " + a.Login + " \nmot de passe: " + a.Mdps);
                Console.WriteLine();
                Console.WriteLine("redonnez moi un choix");
                Console.WriteLine("1.Modification du compte Client\n2.Modification du Contrat\n3.revenir au Menu");
                choix = int.Parse(Console.ReadLine());
            }
            switch (choix)
            {
                case 1 :
                    Console.Clear();
                    agence.ModifcationClient(a);
                    MenuClient(a,agence);
                    break;
               case 2 :
                    break;
                case 3:
                    Console.Clear();
                    Menu(agence);
                    break;
                default:
                    break;

            }

        }
    }
}
